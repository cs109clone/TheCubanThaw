
<div id="preVis" style="width:100%; height:100%;">
    

</div>

<svg id="mySvg" width="100" height="100">
      <defs id="mdef">
        <pattern id="image" x="0" y="0" height="10" width="10">
          <image x="-15" y="0" width="150" height="150" xlink:href="http://www.e-pint.com/epint.jpg"></image>
        </pattern>
  </defs>
</svg>
   



<script>
        $(function () {
            var presidentData = [];


            var initVis = function () {
                var MyEventHandler = new Object();
                var pre_vis = new PresidentVis(d3.select("#preVis"), presidentData, MyEventHandler);
                $(MyEventHandler).bind("selectionChanged", function (event, data) {


                    //congress_vis.onSelectionChange(data);

                })
            }

            var dataLoaded = function (error, _presidentData) {

                console.log(_presidentData);
                /* var geo = '{ "type": "FeatureCollection", "features": [';

                 _tweets.forEach(function (d) {
                     geo += '{"type": "Feature", "properties": {"city": "' + d.City + '", "state": "' + d.State + '", "time": ' + d.epoch_time
                         + '}, "geometry":{ "type": "' + d.type + '", "coordinates": [[';

                     var spl = d.coordinates.split(";");
                     var commaPlacer = 0;
                     spl.forEach(function (c) {

                         if (commaPlacer++ > 0)
                             geo += ', [' + c + ']';
                         else
                             geo += '[' + c + ']';
                     })

                     geo += ']]}},';

                 });
                 geo += ']}';*/
                ////  "geometry": { "type": "Polygon", "coordinates": [ [ [ -85.184131, 32.870525 ], [ -85.123421, 32.772248 ], [ -85.132040, 32.764211 ], [ -85.136776, 32.746512 ], [ -85.285043, 32.730731 ], [ -85.593151, 32.728530 ], [ -85.593177, 33.107340 ], [ -85.232378, 33.108077 ], [ -85.223261, 33.062580 ], [ -85.221868, 33.055538 ], [ -85.184131, 32.870525 ] ] ] } }

                // console.log(geo);

                if (!error) {
                    presidentData = _presidentData;
                    initVis();
                }
            }

            var startHere = function () {
                queue()
                    .defer(d3.json, '/data/presidents.json') // geojson points
                    //.defer(d3.csv, 'data/Usa_Compilation.csv')
                    //.defer(d3.json, 'data/tweets_1.topo.json')
                    //.defer(d3.csv, 'data/legislators-current.csv')
                    .await(dataLoaded);
            }
            startHere();
        })

        var getInnerWidth = function (element) {
            var style = window.getComputedStyle(element.node(), null);
    
            return parseInt(style.getPropertyValue('width'));
        }
    </script>
